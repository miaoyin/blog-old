---
layout: post
title: "局域网如何访问外网"
date: "2014-05-31 23:50"
category: "网络"
---


通常一台主机拥有外网地址，根据网络协议很容易理解，通信的过程.  
 
如果主机拥有的是局域网IP地址，该如何理解？  
比如：常见的一种情况，主机地址是192.168.1.100，连接着一个路由器，路由器通过拨号上网(拥有临时外网IP). 这种情况下局域网主机, 如何访问外网主机(比如www.baidu.com), 根据网络协议似乎很难理解两者是如何通信的？  
 
答案是: 网络地址转换(NAT)，将私有地址转化为合法IP地址。  
 
当主机192.168.1.100向外网主机发送数据，在通过个人路由器时，路由器会修改IP报文，将IP和端口替换为它的外网IP和随机分配的端口，并且将修改前后的信息作为映射关系保存起来, 再将IP报文转发出去. 当外网主机返回信息时，先被路由器接收到，路由器再根据发送数据时保存的映射关系，将数据发送给内网主机.  
